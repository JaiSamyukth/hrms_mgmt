import{r as C,T as D,a as b,b as h,d as e,u,_ as t,Z as j,e as s,f as m,t as r,j as q,g as y,n as B,i as g,h as o,F as T,p as x}from"./app-3874f9f3.js";import{_ as $}from"./GoBackNavLink-440190c8.js";import{_ as A}from"./ReqTabs-7bb1d2ee.js";import{_ as w,X as N}from"./XIcon-d7965f5e.js";import{P}from"./PrimaryButton-f995a144.js";import{S as v}from"./sweetalert2.all-ad940ca7.js";import{_ as E}from"./Card-ab475fc5.js";import{C as I}from"./CheckIcon-904d5a11.js";import{D as V,_ as l,a as n,b as i}from"./DD-10da4a74.js";import{r as W}from"./useRequestTypes-337f6a95.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"py-8"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"flex justify-between items-center mb-4"},Y={class:"card-header mb-2"},L={key:0,class:"flex inline-flex gap-4"},U=["onSubmit"],X={class:"mb-2 ml-1 font-semibold"},z=["onSubmit"],oe={__name:"RequestView",props:{request:Object},setup(a){const _=a,f=C(""),d=D({status:"",admin_response:""}),k=()=>{v.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-900"},buttonsStyling:!1}).fire({title:t("Are you sure You want to :sth this request?",{sth:f.value}),icon:"warning",showCancelButton:!0,confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),inputLabel:f.value===t("reject")?t("(Optional) Provide a reason for rejecting this request:"):"",input:f.value===t("reject")?"textarea":"",inputPlaceholder:f.value===t("reject")?t("We can't accept this leave this week as Mark and Jose will be off and we will be understaffed."):"",reverseButtons:!0}).then(c=>{c.isConfirmed&&(d.admin_response=f.value===t("reject")?c.value:"",d.put(route("requests.update",{id:_.request.id}),{preserveScroll:!0,onError:()=>{x().error(t("Error Updating Request Status"))},onSuccess:()=>{x().success(t("Request Status Updated Successfully"))}}))})},S=()=>{v.mixin({customClass:{confirmButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",cancelButton:"text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-900"},buttonsStyling:!1}).fire({title:t("Are you sure?"),text:t("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonText:t("Yes, Delete!"),cancelButtonText:t("No, Cancel!"),reverseButtons:!0}).then(c=>{c.isConfirmed&&d.delete(route("requests.destroy",{id:_.request.id}),{preserveScroll:!0,onError:()=>{x().error(t("Error Deleting Request"))},onSuccess:()=>{v.fire(t("Request Removed!"),"","success")}})})};return(p,c)=>(b(),h(T,null,[e(u(j),{title:u(t)("Request Data")},null,8,["title"]),e($,null,{tabs:s(()=>[e(A)]),default:s(()=>[m("div",F,[m("div",M,[e(E,{class:"!mt-0"},{default:s(()=>[m("div",null,[m("div",O,[m("h1",Y,r(u(t)("Request #:id Data",{id:a.request.id})),1),p.$page.props.auth.user.roles.includes("admin")?(b(),h("div",L,[m("form",{onSubmit:q(k,["prevent"]),class:"flex gap-4"},[a.request.status!=="Approved"?(b(),y(w,{key:0,text:u(t)("Approve Request"),onClick:c[0]||(c[0]=R=>{u(d).status=1,f.value=u(t)("approve")}),class:B({"opacity-25":u(d).processing}),disabled:u(d).processing},{default:s(()=>[e(I)]),_:1},8,["text","class","disabled"])):g("",!0),a.request.status!=="Rejected"?(b(),y(w,{key:1,text:u(t)("Reject Request"),onClick:c[1]||(c[1]=R=>{u(d).status=2,f.value=u(t)("reject")}),class:B({"opacity-25":u(d).processing}),disabled:u(d).processing},{default:s(()=>[e(N)]),_:1},8,["text","class","disabled"])):g("",!0)],40,U)])):g("",!0)]),m("h2",X,r(u(t)("Request Info")),1),e(V,null,{default:s(()=>[e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("ID")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.id),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("Created By")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.employee.name),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("Request Type")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(u(W)[a.request.type]),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("Request Message")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.message),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("From Date")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.start_date),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("To Date")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.end_date??u(t)("N/A")),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("Submission Date")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(new Date(_.request.created_at).toISOString().split("T")[0]),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("Status")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.status==="Pending"?u(t)("Pending")+" â³":a.request.status==="Approved"?u(t)("Approved")+" âœ…":u(t)("Rejected")+" ðŸš«"),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(r(u(t)("Admin Response")),1)]),_:1}),e(i,null,{default:s(()=>[o(r(a.request.admin_response??"-"),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n),e(i)]),_:1})]),_:1}),p.$page.props.auth.user.roles.includes("admin")?(b(),h("form",{key:0,onSubmit:q(S,["prevent"]),class:"flex justify-end"},[e(P,{class:"bg-red-600 hover:bg-red-700 ml-4 mt-4 focus:bg-red-500 active:bg-red-900"},{default:s(()=>[o(r(u(t)("Delete Request")),1)]),_:1})],40,z)):g("",!0)])]),_:1})])])]),_:1})],64))}};export{oe as default};
